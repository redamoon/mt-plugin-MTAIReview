# MTAIReview プラグイン

Movable Typeの記事編集画面から、Gemini APIを使用してAIレビューを行うプラグインです。

## 機能

- 記事編集画面からワンクリックでAIレビューを実行
- 自由入力のプロンプトでAIに指示可能（SEO改善、校正、トーン調整など）
- タイトルと本文を自動取得してAIに送信
- レビュー結果をモーダルウィンドウで表示

## インストール

1. プラグインディレクトリを `mt-settings/plugins/MTAIReview/` に配置
2. Movable Typeの管理画面でプラグインを有効化
3. プラグイン設定でGemini APIキーを設定

## 設定

### Gemini APIキーの取得

1. [Google AI Studio](https://makersuite.google.com/app/apikey) にアクセス
2. APIキーを作成
3. プラグイン設定画面でAPIキーを入力

## 使い方

1. 記事編集画面を開く
2. 「AIレビュー」ボタンをクリック
3. プロンプト入力ダイアログでAIへの指示を入力
   - 例：「SEOの観点で改善点を指摘して」
   - 例：「この文章を自然で読みやすい形に改善してください」
   - 例：「トーンをカジュアルにして」
4. AIのレビュー結果がモーダルウィンドウに表示されます

## ファイル構成

```
MTAIReview/
├── config.yaml              # プラグイン設定定義
├── lib/
│   └── AIReview/
│       └── Plugin.pm        # メインロジック
├── tmpl/
│   └── ai_review.tmpl       # 設定画面テンプレート
├── static/
│   └── ai_review.js         # フロントエンドJavaScript
└── README.md                # このファイル
```

## 技術仕様

- **API**: Google Gemini Pro (`v1beta/models/gemini-pro:generateContent`)
- **言語**: Perl (バックエンド), JavaScript (フロントエンド)
- **エディタ連携**: TinyMCE対応

## エラーハンドリング

- APIキー未設定時のエラーメッセージ表示
- API呼び出し失敗時の詳細なエラー情報表示
- ネットワークエラーの処理

## セキュリティ

- APIキーはサーバー側で管理（JavaScriptからは隠蔽）
- 認証済みユーザーのみが利用可能

## バージョン

- 0.3: 初回リリース

## ライセンス

このプラグインはサンプル実装です。ご自由に改変・再配布してください。

## トラブルシューティング

### ボタンが表示されない

- 記事編集画面で開いていることを確認してください
- ブラウザのコンソールでエラーを確認してください

### APIエラーが発生する

- Gemini APIキーが正しく設定されているか確認してください
- APIキーに適切な権限があるか確認してください
- ネットワーク接続を確認してください

### レビュー結果が表示されない

- ブラウザのコンソールでエラーを確認してください
- タイトルまたは本文が入力されているか確認してください


